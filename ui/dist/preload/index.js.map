{"version":3,"file":"index.js","sources":["../../src/preload/index.ts"],"sourcesContent":["import { contextBridge, ipcRenderer, IpcRendererEvent } from 'electron'\n\n// Expose protected methods to renderer process\ncontextBridge.exposeInMainWorld('electronAPI', {\n  // Clips\n  getClipsList: () => ipcRenderer.invoke('clips:getList'),\n  saveClipMetadata: (clipId: string, metadata: unknown) =>\n    ipcRenderer.invoke('clips:saveMetadata', clipId, metadata),\n  getClipMetadata: (clipId: string) => ipcRenderer.invoke('clips:getMetadata', clipId),\n  generateThumbnail: (clipId: string, videoPath: string) =>\n    ipcRenderer.invoke('clips:generateThumbnail', clipId, videoPath),\n  getVideoMetadata: (videoPath: string) => ipcRenderer.invoke('clips:getVideoMetadata', videoPath),\n\n  // Audio tracks\n  extractAudioTracks: (clipId: string, videoPath: string) =>\n    ipcRenderer.invoke('audio:extractTracks', clipId, videoPath),\n\n  // Video loading\n  getVideoFileUrl: (filename: string) => ipcRenderer.invoke('video:getFileUrl', filename),\n\n  // Export preview\n  showExportPreview: (filePath: string) => ipcRenderer.invoke('export:showPreview', filePath),\n\n  // System\n  openClipsFolder: () => ipcRenderer.invoke('system:openFolder'),\n\n  // Dialogs (legacy - keep for backwards compatibility)\n  showSaveDialog: (options: Electron.SaveDialogOptions) =>\n    ipcRenderer.invoke('dialog:save', options),\n\n  // New API structure\n  dialog: {\n    save: (options: Electron.SaveDialogOptions) => ipcRenderer.invoke('dialog:save', options),\n  },\n\n  editor: {\n    exportClip: (params: ExportParams) => ipcRenderer.invoke('editor:exportClip', params),\n  },\n\n  // Event listener\n  on: (channel: string, callback: (data: unknown) => void) => {\n    const listener = (_event: IpcRendererEvent, data: unknown) => callback(data)\n    ipcRenderer.on(channel, listener)\n    return () => {\n      ipcRenderer.removeListener(channel, listener)\n    }\n  },\n})\n\ninterface VideoMetadata {\n  duration: number\n  width: number\n  height: number\n  fps: number\n  bitrate: number\n  size: number\n  format: string\n  videoCodec: string\n  audioTracks: number\n}\n\n// Type for clip info (matches main process)\ninterface ClipInfo {\n  id: string\n  filename: string\n  path: string\n  size: number\n  createdAt: string\n  modifiedAt: string\n  metadata: unknown | null\n}\n\ninterface ExportParams {\n  clipPath: string\n  exportFilename: string\n  trimStart: number\n  trimEnd: number\n  audioTrack1: boolean\n  audioTrack2: boolean\n  audioTrack1Volume?: number\n  audioTrack2Volume?: number\n}\n\ninterface ExportResult {\n  success: boolean\n  error?: string\n}\n\ninterface AudioTrackUrls {\n  track1?: string\n  track2?: string\n  error?: string\n}\n\n// Type declarations for TypeScript\ndeclare global {\n  interface Window {\n    electronAPI: {\n      getClipsList: () => Promise<ClipInfo[]>\n      saveClipMetadata: (clipId: string, metadata: unknown) => Promise<boolean>\n      getClipMetadata: (clipId: string) => Promise<unknown | null>\n      generateThumbnail: (clipId: string, videoPath: string) => Promise<string>\n      getVideoMetadata: (videoPath: string) => Promise<VideoMetadata>\n      extractAudioTracks: (clipId: string, videoPath: string) => Promise<AudioTrackUrls>\n      getVideoFileUrl: (filename: string) => Promise<{ success: boolean; url?: string; path?: string; error?: string }>\n      openClipsFolder: () => Promise<void>\n      showSaveDialog: (\n        options: Electron.SaveDialogOptions\n      ) => Promise<Electron.SaveDialogReturnValue>\n      dialog: {\n        save: (options: Electron.SaveDialogOptions) => Promise<Electron.SaveDialogReturnValue>\n      }\n      editor: {\n        exportClip: (params: ExportParams) => Promise<ExportResult>\n      }\n      on: (channel: string, callback: (data: unknown) => void) => (() => void) | undefined\n    }\n  }\n}\n"],"names":["contextBridge","ipcRenderer","clipId","metadata","videoPath","filename","filePath","options","params","channel","callback","listener","_event","data"],"mappings":"yCAGAA,EAAAA,cAAc,kBAAkB,cAAe,CAE7C,aAAc,IAAMC,EAAAA,YAAY,OAAO,eAAe,EACtD,iBAAkB,CAACC,EAAgBC,IACjCF,EAAAA,YAAY,OAAO,qBAAsBC,EAAQC,CAAQ,EAC3D,gBAAkBD,GAAmBD,EAAAA,YAAY,OAAO,oBAAqBC,CAAM,EACnF,kBAAmB,CAACA,EAAgBE,IAClCH,EAAAA,YAAY,OAAO,0BAA2BC,EAAQE,CAAS,EACjE,iBAAmBA,GAAsBH,EAAAA,YAAY,OAAO,yBAA0BG,CAAS,EAG/F,mBAAoB,CAACF,EAAgBE,IACnCH,EAAAA,YAAY,OAAO,sBAAuBC,EAAQE,CAAS,EAG7D,gBAAkBC,GAAqBJ,EAAAA,YAAY,OAAO,mBAAoBI,CAAQ,EAGtF,kBAAoBC,GAAqBL,EAAAA,YAAY,OAAO,qBAAsBK,CAAQ,EAG1F,gBAAiB,IAAML,EAAAA,YAAY,OAAO,mBAAmB,EAG7D,eAAiBM,GACfN,EAAAA,YAAY,OAAO,cAAeM,CAAO,EAG3C,OAAQ,CACN,KAAOA,GAAwCN,EAAAA,YAAY,OAAO,cAAeM,CAAO,CAAA,EAG1F,OAAQ,CACN,WAAaC,GAAyBP,EAAAA,YAAY,OAAO,oBAAqBO,CAAM,CAAA,EAItF,GAAI,CAACC,EAAiBC,IAAsC,CAC1D,MAAMC,EAAW,CAACC,EAA0BC,IAAkBH,EAASG,CAAI,EAC3EZ,OAAAA,cAAY,GAAGQ,EAASE,CAAQ,EACzB,IAAM,CACXV,cAAY,eAAeQ,EAASE,CAAQ,CAC9C,CACF,CACF,CAAC"}