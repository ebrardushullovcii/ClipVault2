# clangd configuration for ClipVault
# This helps the language server understand the project structure
# 
# SETUP INSTRUCTIONS:
# 1. Install LLVM (includes clangd): scoop install llvm
# 2. Build project once: .\build.ps1  
# 3. Install "clangd" extension in VS Code/Cursor (NOT Microsoft's C/C++ extension)
# 4. Restart VS Code/Cursor
# 5. Open any .cpp file - you should see autocomplete and diagnostics
#
# TROUBLESHOOTING:
# - If clangd not found in PATH: Restart terminal or VS Code
# - If no autocomplete: Check build/compile_commands.json exists
# - If OBS headers not found: Run .\build.ps1 to generate compile commands

CompileFlags:
  # Add missing includes that clangd might not find automatically
  Add:
    - -xc++
    - -std=c++17
    - -Wall
    - -Wextra
    - -DWIN32_LEAN_AND_MEAN
    - -DNOMINMAX
    - -D_CRT_SECURE_NO_WARNINGS

  # Remove any flags that might confuse clangd
  Remove:
    - -fno-exceptions

Diagnostics:
  # Suppress common false positives in Windows/OBS code
  Suppress:
    - "unknown-argument"
    - "pragma-once-outside-header"

Index:
  # Enable background indexing for better code navigation
  Background: Build

# Tell clangd where to find the compile commands
CompileCommandsDir: build

# Extra includes for OBS headers
InlayHints:
  Enabled: true
  ParameterNames: true
  DeducedTypes: true
