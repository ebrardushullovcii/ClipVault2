{"version":3,"file":"index.js","sources":["../../src/preload/index.ts"],"sourcesContent":["import { contextBridge, ipcRenderer, IpcRendererEvent } from 'electron'\n\n// Expose protected methods to renderer process\ncontextBridge.exposeInMainWorld('electronAPI', {\n  // Clips\n  getClipsList: () => ipcRenderer.invoke('clips:getList'),\n  saveClipMetadata: (clipId: string, metadata: unknown) =>\n    ipcRenderer.invoke('clips:saveMetadata', clipId, metadata),\n  getClipMetadata: (clipId: string) => ipcRenderer.invoke('clips:getMetadata', clipId),\n  generateThumbnail: (clipId: string, videoPath: string) =>\n    ipcRenderer.invoke('clips:generateThumbnail', clipId, videoPath),\n  getVideoMetadata: (videoPath: string) => ipcRenderer.invoke('clips:getVideoMetadata', videoPath),\n\n  // Audio tracks\n  extractAudioTracks: (clipId: string, videoPath: string) =>\n    ipcRenderer.invoke('audio:extractTracks', clipId, videoPath),\n\n  // Video loading\n  getVideoFileUrl: (filename: string) => ipcRenderer.invoke('video:getFileUrl', filename),\n\n  // Export preview\n  showExportPreview: (filePath: string) => ipcRenderer.invoke('export:showPreview', filePath),\n\n  // System\n  openClipsFolder: () => ipcRenderer.invoke('system:openFolder'),\n\n  // Dialogs (legacy - keep for backwards compatibility)\n  showSaveDialog: (options: Electron.SaveDialogOptions) =>\n    ipcRenderer.invoke('dialog:save', options),\n\n  // New API structure\n  dialog: {\n    save: (options: Electron.SaveDialogOptions) => ipcRenderer.invoke('dialog:save', options),\n  },\n\n  editor: {\n    exportClip: (params: ExportParams) => ipcRenderer.invoke('editor:exportClip', params),\n  },\n\n  // Event listener\n  on: (channel: string, callback: (data: unknown) => void) => {\n    const listener = (_event: IpcRendererEvent, data: unknown) => callback(data)\n    ipcRenderer.on(channel, listener)\n    return () => {\n      ipcRenderer.removeListener(channel, listener)\n    }\n  },\n})\n\ninterface VideoMetadata {\n  duration: number\n  width: number\n  height: number\n  fps: number\n  bitrate: number\n  size: number\n  format: string\n  videoCodec: string\n  audioTracks: number\n}\n\n// Type for clip info (matches main process)\ninterface ClipInfo {\n  id: string\n  filename: string\n  path: string\n  size: number\n  createdAt: string\n  modifiedAt: string\n  metadata: unknown | null\n}\n\ninterface ExportParams {\n  clipPath: string\n  exportFilename: string\n  trimStart: number\n  trimEnd: number\n  audioTrack1: boolean\n  audioTrack2: boolean\n  audioTrack1Volume?: number\n  audioTrack2Volume?: number\n}\n\ninterface ExportResult {\n  success: boolean\n  error?: string\n}\n\ninterface AudioTrackUrls {\n  track1?: string\n  track2?: string\n  error?: string\n}\n\n// Type declarations for TypeScript\ndeclare global {\n  interface Window {\n    electronAPI: {\n      getClipsList: () => Promise<ClipInfo[]>\n      saveClipMetadata: (clipId: string, metadata: unknown) => Promise<boolean>\n      getClipMetadata: (clipId: string) => Promise<unknown | null>\n      generateThumbnail: (clipId: string, videoPath: string) => Promise<string>\n      getVideoMetadata: (videoPath: string) => Promise<VideoMetadata>\n      extractAudioTracks: (clipId: string, videoPath: string) => Promise<AudioTrackUrls>\n      getVideoFileUrl: (filename: string) => Promise<{ success: boolean; url?: string; path?: string; error?: string }>\n      openClipsFolder: () => Promise<void>\n      showSaveDialog: (\n        options: Electron.SaveDialogOptions\n      ) => Promise<Electron.SaveDialogReturnValue>\n      dialog: {\n        save: (options: Electron.SaveDialogOptions) => Promise<Electron.SaveDialogReturnValue>\n      }\n      editor: {\n        exportClip: (params: ExportParams) => Promise<ExportResult>\n      }\n      on: (channel: string, callback: (data: unknown) => void) => (() => void) | undefined\n    }\n  }\n}\n"],"names":["contextBridge","ipcRenderer"],"mappings":";;AAGAA,SAAAA,cAAc,kBAAkB,eAAe;AAAA;AAAA,EAE7C,cAAc,MAAMC,SAAAA,YAAY,OAAO,eAAe;AAAA,EACtD,kBAAkB,CAAC,QAAgB,aACjCA,SAAAA,YAAY,OAAO,sBAAsB,QAAQ,QAAQ;AAAA,EAC3D,iBAAiB,CAAC,WAAmBA,SAAAA,YAAY,OAAO,qBAAqB,MAAM;AAAA,EACnF,mBAAmB,CAAC,QAAgB,cAClCA,SAAAA,YAAY,OAAO,2BAA2B,QAAQ,SAAS;AAAA,EACjE,kBAAkB,CAAC,cAAsBA,SAAAA,YAAY,OAAO,0BAA0B,SAAS;AAAA;AAAA,EAG/F,oBAAoB,CAAC,QAAgB,cACnCA,SAAAA,YAAY,OAAO,uBAAuB,QAAQ,SAAS;AAAA;AAAA,EAG7D,iBAAiB,CAAC,aAAqBA,SAAAA,YAAY,OAAO,oBAAoB,QAAQ;AAAA;AAAA,EAGtF,mBAAmB,CAAC,aAAqBA,SAAAA,YAAY,OAAO,sBAAsB,QAAQ;AAAA;AAAA,EAG1F,iBAAiB,MAAMA,SAAAA,YAAY,OAAO,mBAAmB;AAAA;AAAA,EAG7D,gBAAgB,CAAC,YACfA,SAAAA,YAAY,OAAO,eAAe,OAAO;AAAA;AAAA,EAG3C,QAAQ;AAAA,IACN,MAAM,CAAC,YAAwCA,SAAAA,YAAY,OAAO,eAAe,OAAO;AAAA,EAAA;AAAA,EAG1F,QAAQ;AAAA,IACN,YAAY,CAAC,WAAyBA,SAAAA,YAAY,OAAO,qBAAqB,MAAM;AAAA,EAAA;AAAA;AAAA,EAItF,IAAI,CAAC,SAAiB,aAAsC;AAC1D,UAAM,WAAW,CAAC,QAA0B,SAAkB,SAAS,IAAI;AAC3EA,yBAAY,GAAG,SAAS,QAAQ;AAChC,WAAO,MAAM;AACXA,2BAAY,eAAe,SAAS,QAAQ;AAAA,IAC9C;AAAA,EACF;AACF,CAAC;"}